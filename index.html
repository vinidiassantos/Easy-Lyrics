<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <title>Easy Lyrics</title>
</head>
<body>
  <h1>ğŸ¸ Easy Lyrics</h1>

  <textarea id="htmlInput" rows="15" cols="100" placeholder="Cole aqui o cÃ³digo-fonte da pÃ¡gina do Cifra Club..."></textarea><br><br>

  <button onclick="extrairCifra()">ğŸ¼ Extrair Cifra</button>
  <button onclick="verHistorico()">ğŸ“š Ver HistÃ³rico</button>
  <button onclick="limparHistorico()">ğŸ—‘ï¸ Limpar HistÃ³rico</button>

  <h2>Resultado:</h2>
  <pre id="output"></pre>

  <script>
    function extrairCifra() {
      const html = document.getElementById("htmlInput").value;
      const parser = new DOMParser();
      const doc = parser.parseFromString(html, "text/html");

      const cifraEl = doc.querySelector("pre.cifra");

      if (cifraEl) {
        const cifraText = cifraEl.innerText;
        document.getElementById("output").textContent = cifraText;

        salvarNoHistorico(cifraText);
      } else {
        document.getElementById("output").textContent = "âŒ NÃ£o foi possÃ­vel encontrar a cifra.";
      }
    }

    function salvarNoHistorico(cifra) {
      let historico = JSON.parse(localStorage.getItem("historicoCifras")) || [];
      historico.unshift({
        data: new Date().toLocaleString(),
        cifra: cifra
      });
      localStorage.setItem("historicoCifras", JSON.stringify(historico));
    }

    function verHistorico() {
      let historico = JSON.parse(localStorage.getItem("historicoCifras")) || [];
      if (historico.length === 0) {
        alert("âš ï¸ Nenhuma cifra salva no histÃ³rico.");
        return;
      }

      let resultado = "ğŸµ HistÃ³rico de Cifras:\n\n";
      historico.forEach((item, index) => {
        resultado += `#${index + 1} â€“ ${item.data}\n${item.cifra.slice(0, 300)}...\n\n`; // Mostra inÃ­cio da cifra
      });

      alert(resultado);
    }

    function limparHistorico() {
      if (confirm("Tem certeza que deseja apagar o histÃ³rico?")) {
        localStorage.removeItem("historicoCifras");
        alert("âœ… HistÃ³rico apagado com sucesso.");
      }
    }
  </script>
</body>
</html>
